<!--this is blocbox/templates/startashipment.html -- URL is www.blocbox.co/startashipment -->
{% extends "blocbox/base.html" %}
{% load staticfiles %} 
<!--load the scheduling tags-->
{% load i18n %}
{% load scheduletags i18n %}
{% load scheduletags %}

{% block title %}Start a Shipment{% endblock %}

{% block headafter %} 

 

<script type="text/javascript">
    $(document).ready(function(){
        $('.text_container').addClass("hideit");

        $('.text_container').click(function() {
            var $this = $(this);

            if ($this.hasClass("hideit")) {
                $(this).removeClass("hideit").addClass("visible");

            } else {
                $(this).removeClass("visible").addClass("hideit");
            }
        });
    });
</script>

{% endblock %} 

{% block content %}

<div class="content container-fluid offwhitebackground relativediv">

		<!--top matter-->
    <p class="darkgreytext textcenter margintop60px marginbottom20px">Complete the following steps to verify shipping destination, notify your Blocbox host, and complete payment</p>
		<div class="row">
		    <div class="col-xs-8 col-xs-offset-2 nopadding">
		        <p class="col-xs-3 ltbluetext textshadow textleft">1   HOST AVAILABILITY</p>
		        <div class="col-xs-2 divline margintop10px"></div>
		        <p class="col-xs-2 ltgreytext textcenter">2   PAYMENT</p>
		        <div class="col-xs-2 divline margintop10px"></div>
		        <p class="col-xs-3 ltgreytext textright">3   SHIP YOUR ORDER</p>
		    </div>
		</div> <!--row for top  matter-->
		
    		
    {% if host %}
    {% else %} <!--if there is not a host specified..select one-->
    <!--cSelect host and delivery address-->
    <div class="col-xs-8 col-xs-offset-2 bluebackground margintop20px">
        <h6 class="col-xs-6 whitetext margintop15px marginsides3pct nopadding">Select Your Host and Delivery Address</h6>
    </div>
		<div class="col-xs-8 col-xs-offset-2 profilebox marginbottom20px">
  			<div class="row"> 					
      	  	<h6 class="col-xs-5 marginsides3pct margintop30px marginbottom20px nopaddingleft">Select a connected host to recieve your package and confirm their address</h6>
      	  	<div class="col-xs-6 dropdown margintop30px margintop20px marginbottom30px">
      	  	   
      	  	 
      	  	    <div class="dropdown marginbottom20px" id="bs-example-navbar-collapse-1">      	  	       
      	  	        <button class="selector dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
       	  	        		Select a Host
      	  	        	  <span class="caret"></span>
      	  	       	</button> 
      	  	    		<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
      	  	    			{% for connection in connections_all %}
      	  	    					<li role="presentation"><a role="menuitem" tabindex="-1" onClick="window.location='/startashipment/host{{ connection.host_user.id }}';">
      	  	    								{{ connection.host_user.first_name }} {{ connection.host_user.last_name }}: 
      	  	        						{{ connection.host_user.st_address1 }} {{ connection.host_user.st_address2 }} 	  
      	  	    					</a></li>      	  	        					        					 	
      	  	       		{% endfor %}  									
   												<li role="presentation"><a role="menuitem" tabindex="-1" onClick="window.location='/search';">Search for a New Host</a></li>
  									</ul>      

      	  	        
      	  	        	<ul class="dropdown-menu nav navbar-nav navbar-right" role="menu"> </ul>
      	  	    </div> <!--dropdown-->
      	  	</div> <!--dropdown col-xs-6-->
      	  	
   			</div><!--row-->
		</div> <!--profilebox-->
		{% endif %} 
		
    <div class="text_container col-xs-8 col-xs-offset-2">
        <div><!--div that we want to hide-->
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam blandit, eros id adipiscing congue, lorem ante sagittis elit, id malesuada nibh est sed orci</p>
        </div>
    </div><!--end div_text_container-->
   
		<!--confirming availabiility-->
		{% if host %}
  	<div class="col-xs-8 col-xs-offset-2 bluebackground">
        <h6 class="col-xs-4 whitetext margintop15px marginsides3pct nopadding">Confirm {{host.first_name}}'s Availability</h6>
  	</div>
  	<div class="col-xs-8 col-xs-offset-2 profilebox marginbottom20px">
        <div class="row">  
            <h6 class="col-xs-6 margintop30px marginbottom30px">
            		First, select the shipping method to provide an approximate date of arrival
           	</h6>
            <div class="col-xs-6 dropdown margintop30px  marginbottom30px" id="bs-example-navbar-collapse-1">                
                <!--JMY NOTE: this sounds sort of demaning -t hey might not know the 'method" but may know approximately
                		when it will arrive. we should think about the language..
                		Also: maybe should be write in?-->
              <!--drop down menu button-->
              <button class="selector dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
                    When will your package arrive?
                    <span class="caret"></span>
              </button>
              <!--actual dropdown menu-->
              <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
    						<li role="presentation"><a role="menuitem" tabindex="-1" onClick="window.location='/startashipment/host{{ host.id }}/days2to2';">2 Days</a></li>
    						<li role="presentation"><a role="menuitem" tabindex="-1" onClick="window.location='/startashipment/host{{ host.id }}/days1to1';">Tomorrow</a></li>
    						<li role="presentation"><a role="menuitem" tabindex="-1" onClick="window.location='/startashipment/host{{ host.id }}/days3to3';">3 Days</a></li>
    						<li role="presentation"><a role="menuitem" tabindex="-1" onClick="window.location='/startashipment/host{{ host.id }}/days2to3';">2-3 Days</a></li>   									
   							<li role="presentation"><a role="menuitem" tabindex="-1" onClick="window.location='/startashipment/host{{ host.id }}/days3to4';">3-4 Days</a></li>
   							<li role="presentation"><a role="menuitem" tabindex="-1" onClick="window.location='/startashipment/host{{ host.id }}/days4to5';">4-5 Days</a></li>
   							<li role="presentation"><a role="menuitem" tabindex="-1" onClick="window.location='/startashipment/host{{ host.id }}/days5to7';">5-7 Days</a></li>
   							<li role="presentation"><a role="menuitem" tabindex="-1" onClick="window.location='/startashipment/host{{ host.id }}/days7to10';">7-10 Days</a></li>
   							<li role="presentation"><a role="menuitem" tabindex="-1" onClick="window.location='/startashipment/host{{ host.id }}/days10to14';">10-14 Days</a></li>
  						</ul>  							
            </div> <!--col-xs-6 dropdown-->
        </div> <!--row-->

       
           	
    
		<!--HOST CALENDAR -->
    <div class="row">  
          <h6 class=" col-xs-12 marginbottom30px">
          			Next, confirm {{ host.first_name }} is available 
               inside your package's expected delivery window. Click "submit" once availability is confirmed.
          </h6>
              
          <!--add the calendar associated with this host (its still under the if-host condition)-->  
					{% if dayrangestart %}
        			<h6 class="col-xs-4">Your package will arrive in {{dayrangestart}} to  {{dayrangeend}} days.</h3>
        			<h6 class="col-xs-4">{{ host.first_name }}'s availability for the next two months is shown here.  
        						{{ host.first_name }} is available unless the date is blacked out.</h3>
    			{% endif %}
						
					<div class="col-xs-8"> <!--row containing all calendars-->												
										<div class="row">																						
												<div class="col-xs-12 col-sm-6">	{% month_table AvailabilityCal AvailabilityCal_MonthObject "small" %}  	</div> 													
												<div class="col-xs-12 col-sm-6">  {% month_table AvailabilityCal AvailabilityCal_MonthObject "small" +1 %}	</div> 
										</div> <!--row, containing calendars -->														
        	</div> <!--row, containing calendars -->
    </div> <!--row--> 
         
        	<br> <br>
       		<div class="row">

           	<p class="col-xs-12 darkgreytext marginbottom20px">Avaiability policy: Hosts are accountable for all packages delivered on days that they commmited to being available and are required to regularly update their availability. 
           		If they miss the package, you will not be charged, and the host is responsible for tracking down the missed delivery. 
           		However, if you send a package to a host that might arrive on a day when they have stated they are unavailable, 
           		you will be charged even if the host misses the delivery.  You're likely to still get the package, 
           		but it may not be available for pickup until a later date.</p>
       		</div>
       		
       		<div class="row">
       	 		<p class="col-xs-12 darkgreytext marginbottom20px"> If {{ host.first_name }} isn'tavailable, select another connected host or <a href="/search/">search for another neighbor near you </a>  
     						to connect with. </p>
     			</div>
     					 
    	</div> <!--profile box-->
    	
    	<div class="col-sm-2 col-sm-offset-8 marginbottom30px paddingleft69px nopaddingright">
    			<!--NOTE: RIGHT NOW THIS LINKS TO JOHN'S HOST PAYMENT - NEED TO UPDATE TO PASS THE ARGUMENT/REFRESH PAGE ONCE TEY SELECT HOST-->
        	<button class="bluebutton" onClick="window.location='/payment/host2';">Submit</button>    
    	</div> 
    	

	{% endif %}
</div>



{% endblock %} 