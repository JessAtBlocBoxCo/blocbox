{% extends "blocbox/basewaitlist.html" %}
{% load staticfiles %} {% block title %} Join Our Waitlist {% endblock %} {% block topcontent %}
<!--this is blocbox/core/templates/bocbox/joinwaitlist_formtestpost.html, url is http://www.blocbox.co/waitlistconfirmation/-->




<br>
<div class="row-fluid fullheight">
   
  <div class="col-xs-12 col-xs-offset-0 col-sm-6 col-sm-offset-3 col-lg-4 col-lg-offset-4">
        <div class="promo"></div>
        <h2 class="nomargintop signup-padding">Sign Up</h2>
        <h3 class="paddingbottom20pxnomobile" style="font-size: 1.7em">Launching soon in select neighborhoods</h3>
        <!--<form action="http://blocbox.us8.list-manage.com/subscribe/post?u=a7a534bd9460b420e502241f0&amp;id=a442e04636" 
        method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="paddingsides15px" target="_blank" novalidate> -->
   <form action="." method="post"  class="paddingsides15px" role="form"   enctype="multipart/form-data" name="ajaxform" id="ajaxform"> 
  	<!--form action="ajax-form-submit.php"-->
           
            {% csrf_token %}  
                                   
            <div class="form-group col-xs-12" style="margin-bottom: 5px">
 							  
                <input name="email" placeholder="EMAIL" class="form-control input-lg inputbox margintop5px" type="email">
            </div>
            <div class="row">
                <div class="form-group col-xs-12">
              
                <input name="first_name" placeholder="FIRST NAME" class="form-control input-lg inputbox margintop5px" type="text">
            </div>
            </div>
            
            <div class="form-group col-xs-12">            		
                <input name="zipcode" placeholder="ZIP" class="form-control input-lg inputbox margintop5px" type="text">
            </div>
            
            <div class="form-group col-xs-12">
            	
                <input name="referredby"  class="form-control input-lg inputbox margintop5px" type="hidden"
                	value="{{referring_user_email}}">
            </div>
            
        
            <div class="col-xs-10 col-xs-offset-1 paddingtop10px nopaddingmobile waitlistcheck">
                <div class="checkbox checkbox-success checkbox-inline text-center">
                    <input type="checkbox" value="1" name="hostinterest" id="id_hostinterest">
                       <label for="id_hostinterest">
                        <h6 class="nomargin textleft paddingleft10px">I'm interested in helping my neighbors and making some extra money</h6>
                    </label>
                </div>
               
            </div>

		
        <div class="col-xs-12 paddingtop20px paddingtop15pxmobile">
        		<input type="submit" value="Join Waitlist">
              <!--  <button type="submit" value="Join Waitlist" name="subscribe" class="btn-waitlist margintop5px">Join Waitlist</button>-->
        </div>
       
        <br> <br> <br>   <br> 
      
            <div id="mce-responses" class="clear">
                <div class="response" id="mce-error-response" style="display:none"></div>
                <div class="response" id="mce-success-response" style="display:none"></div>
            </div>
			
            <!--row-->
 </form>

<script type="text/javascript" src="js/Ajax.js"></script><br/> 
<script type="text/javascript" src="js/Post.js"></script><br/> 
<script>
	//from: http://api.jquery.com/jQuery.post/
	//include the javascript file for override the before send thing that is causing error
{% include "javascript_includes/override_beforesend.js" %}
	  $("#ajaxform").submit(function(event){	      
			//stop form from submitting normally
			event.preventDefault();
			//Get some values from elements on the page
				 //var PostDataPrep = $(this),
    		 var PostDataPrep = $(this).serializeArray(),
    		     formURL = $(this).attr("action");
    		 var PostData = JSON.stringify(PostDataPrep);
    		 
    		$.ajax(	{
        		url : formURL,
        		method: "POST",
            data : JSON.stringify(PostData),
            dataType: "json",
        success:function(data, textStatus, jqXHR) 
        {	console.log( 'You successfully posted the PostData' + PostData );  },
        
        error: function(xhr, textStatus, thrownError) 
         {
         	console.log( 'the PostDataPrep var is' + PostDataPrep );
         	console.log( 'the PostData var is' + PostData );
          console.log( 'There was an error...error variables shown below');
    			console.log( 'XHR responseText is: ' + xhr.responseText ) ;
    			console.log( 'textStatus is:' + textStatus);
    			console.log( 'thrownError is:' + thrownError);     
        }	
    });
		//$("#ajaxform").submit();
    //event.unbind(); //unbind. to stop multiple form submit.
});
//$("#ajaxform").submit(); //Submit  the FORM
</script>


 <h3>TEST SHOW WAITLIST REGISTERED {{ waitlistregistered  }} AND formresponse {{ formresponse }}
 	<br> AND formresponsenum {{ formresponsenum}}  </h3>
        <!-- <a href="privacy-policy.html">By Signing Up, I Agree to Blocbox's Privacy Policy</a> -->
  </div>
  	<br>
    <div class="text-center alignbottomdiv mobilehide">
        <a href="#learn">
            <p class="whitetext nomargin">LEARN MORE</p>
            <img src="{% static 'blocbox/images/arrow-white.png' %}" height="50" width="50" />
        </a> 
    </div>
</div>






{% endblock %}